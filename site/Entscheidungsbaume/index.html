
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.8">
    
    
      
        <title>Entscheidungsbäume - LF10c</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#entscheidungsbaume" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="LF10c" class="md-header__button md-logo" aria-label="LF10c" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LF10c
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Entscheidungsbäume
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="LF10c" class="md-nav__button md-logo" aria-label="LF10c" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    LF10c
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS1/" class="md-nav__link">
        LS10c.1
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS2/" class="md-nav__link">
        LS10c.2
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS3/" class="md-nav__link">
        LS10c.3
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS4/" class="md-nav__link">
        LS10c.4
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS5/" class="md-nav__link">
        LS10c.5
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS6/" class="md-nav__link">
        LS10c.6
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS7/" class="md-nav__link">
        LS10c.7
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS8/" class="md-nav__link">
        LS10c.8
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LS9/" class="md-nav__link">
        LS10c.9
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#handlungssituation" class="md-nav__link">
    Handlungssituation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-zur-verfugung-gestellten-daten" class="md-nav__link">
    Die zur Verfügung gestellten Daten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-1-visualisierung-der-daten" class="md-nav__link">
    Aufgabe 1: Visualisierung der Daten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyse-des-datensatzes" class="md-nav__link">
    Analyse des Datensatzes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-2" class="md-nav__link">
    Aufgabe 2
  </a>
  
    <nav class="md-nav" aria-label="Aufgabe 2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#losung" class="md-nav__link">
    Lösung
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-3" class="md-nav__link">
    Aufgabe 3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-4" class="md-nav__link">
    Aufgabe 4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-5" class="md-nav__link">
    Aufgabe 5
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-6" class="md-nav__link">
    Aufgabe 6
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-7" class="md-nav__link">
    Aufgabe 7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aufgabe-8" class="md-nav__link">
    Aufgabe 8
  </a>
  
    <nav class="md-nav" aria-label="Aufgabe 8">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#die-prasentation-sollte-folgendes-beinhalten" class="md-nav__link">
    Die Präsentation sollte folgendes beinhalten:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fragen-zum-verstandnis" class="md-nav__link">
    Fragen zum Verständnis
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="entscheidungsbaume">Entscheidungsbäume</h1>
<h2 id="handlungssituation">Handlungssituation</h2>
<p><img alt="Teaser" src="../images/weizenfeld.jpg" /></p>
<blockquote>
<p>Ein großer Landmaschinenhersteller wünscht sich eine größere Kundenbindung und beauftragt die ChangeIT GmbH mit der Entwicklung einer App, die Landwirten Empfehlungen gibt, wann der Weizen zu ernten ist. Die App misst dazu über einen via Bluetooth gekoppelten Feuchte-Sensor die Bodenfeuchte im Feld und kann über eine API Abfrage die Regenwahrscheinlichkeit bestimmen.</p>
<p>Erste Erfahrungswerte liegen bereits vor und werden vom Landmaschinenhersteller der ChangeIT in Form einer CSV Datei zur Verfügung gestellt.</p>
<p>Als Mitglied der Abteilung Daten- und Prozessanalyse erhalten Sie die Aufgabe ein geeignetes Vorhersagemodell zu entwickeln.[^1]</p>
</blockquote>
<p>[^1]: Vgl. Brandt, Y., Eickhoff-Schachtebeck, A. und Strecker, K. (2022): „Schulbuch starkeSeiten Informatik Jahrgang 9/10 Differenzierende Ausgabe Niedersachsen“, Klett-Verlag 2022</p>
<!--dsdaten-->

<h2 id="die-zur-verfugung-gestellten-daten">Die zur Verfügung gestellten Daten</h2>
<p>Die Daten die uns der Auftraggeber zur Verfügung stellt liegen in Form einer <em>csv</em> Datei vor.</p>
<div class="highlight"><pre><span></span><code>&quot;Feuchte&quot;,&quot;Regenwahrscheinlichkeit&quot;,&quot;Ergebnis&quot;
&quot;17.94&quot;,&quot;56.89&quot;,&quot;Warten&quot;
&quot;15.01&quot;,&quot;80.88&quot;,&quot;Ernten&quot;
&quot;15.56&quot;,&quot;75.99&quot;,&quot;Warten&quot;
&quot;18.25&quot;,&quot;36.97&quot;,&quot;Warten&quot;
&quot;16.52&quot;,&quot;90.11&quot;,&quot;Warten&quot;
&quot;15.26&quot;,&quot;27.82&quot;,&quot;Warten&quot;
</code></pre></div>
<p>Die Spalten haben dabei folgende Bedeutung:</p>
<ul>
<li>Feuchte: Der Wert der Bodenfeuchte</li>
<li>Regenwahrscheinlichkeit: Die Regenwahrscheinlichkeit in %</li>
<li>Ergebnis: Die bisherigen Erfahrungswerte, wann es sich lohnt den Weizen zu <strong>Ernten</strong> oder besser noch zu <strong>Warten</strong>.</li>
</ul>
<!--dsdaten-->
<!--dsaufgabe1-->

<h2 id="aufgabe-1-visualisierung-der-daten">Aufgabe 1: Visualisierung der Daten</h2>
<p>Zunächst sollen die Daten in einem Diagramm visualisiert werden, um sich eine Vorstellung von den Daten zu machen.</p>
<p>Schreiben Sie ein erste Python-Programm, welches möglichst anschaulich den zur Verfügung gestellten Datensatz (<a href="https://jtuttas.github.io/datenanalyse/Data/ErnteBauern.csv">ErnteBauern.csv</a>) visualisiert.</p>
<p><strong>Hinweise:</strong></p>
<p>Einlesen kann man eine CSV Datei in Python auf unterschiedlichste Weise. Zur späteren Datenanalyse ist jedoch die Bibliothek <strong>pandas</strong> das geeignete Mittel. Hier existiert bereits eine Methode <strong>read_csv</strong> die dieses erledigt.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># CSV-Datei laden</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Datei.csv&#39;</span><span class="p">)</span>
</code></pre></div>
<p>Zum Darstellen von Datenmenge nutzen wir die Bibliothek <strong>matplotlib.pyplot</strong>. Diese muss zunächst importiert werden.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</code></pre></div>
<p>Angesprochen werden kann die Bibliothek hier über den Namen <strong>plt</strong>. Enthalten ist z.B. eine Methode zum Darstellen von Punktemengen als X und Y werte (<strong>scatter</strong>). Über die Methode <strong>show()</strong> wird dann die Grafik angezeigt.</p>
<div class="highlight"><pre><span></span><code><span class="n">datax</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">datay</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">datax</span><span class="p">,</span><span class="n">datay</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<!--dsaufgabe1-->
<p>\newpage</p>
<h2 id="analyse-des-datensatzes">Analyse des Datensatzes</h2>
<!--dsanalyse1-->

<p>Stellt man die zur Verfügung gestellten Datensatz grafisch dar, so erhält man z.B. folgende Darstellung.</p>
<!--dsinfo1-->

<p><img alt="Visualisierung des Datensatzes" src="../images/ds1.png" /> </p>
<!--dsanalyse1-->

<blockquote>
<p>Entwerfen Sie im Klassenverband erste Idee wie man ein Modell entwickeln könnte, welches Aussagen entwickelt wann es sich lohnt den Weizen zu ernten!</p>
</blockquote>
<p>Betrachtet man die Daten ein wenig genauer, so fällt auf, dass ab einer Bodenfeuchte von &gt;= 16 auf jeden Fall gewartet werden soll.</p>
<p><img alt="Feuchte zum Warten" src="../images/ds2.png" /></p>
<p>Doch wie kann ein Algorithmus auf diesen Wert kommen? Die Lösung hierfür bietet und der Wert der Entropie einer Datenmenge.</p>
<blockquote>
<p>Die Entropie einer Datenmenge ist ein Maß dafür, wie viel "Unordnung" oder "Unsicherheit" in den Daten vorhanden ist. Eine höhere Entropie bedeutet, dass die Daten weniger geordnet und daher schwieriger vorherzusagen sind. Die Entropie wird normalerweise in Bits gemessen.</p>
<p>Eine Entropie von 0 tritt nur auf, wenn alle Elemente in der Datenmenge identisch sind. In diesem Fall gibt es keine Unsicherheit, da das Auftreten jedes Elements vorhersehbar ist. Ein Beispiel wäre eine Liste von Einsen: Jedes Element ist eine 1, und daher gibt es keine Unsicherheit oder Entropie in den Daten.</p>
</blockquote>
<p>Wir Menschen sind also auf den Wert Feuchte &gt;= 16 gekommen, indem wir eine Grenze gesucht haben, um eine Teilmenge zu erzeugen, die einen Entropie-Wert von 0 hat.</p>
<p>Die Formel zur Berechnung der Wahrscheinlichkeit eines Ereignisses ist:</p>
<div class="arithmatex">\[P(x_i) = \frac{n_i}{N}\]</div>
<p>wobei <span class="arithmatex">\(n_i\)</span> die Anzahl der Beispiele ist, in denen das Element <span class="arithmatex">\(x_i\)</span> auftritt und <span class="arithmatex">\(N\)</span> die Gesamtzahl der Beispiele im Array ist.</p>
<p>Die Shannon-Entropie-Formel zur Berechnung der Entropie lautet wie folgt:</p>
<div class="arithmatex">\[H(X) = -\sum_{i=1}^n P(x_i) \log_2(P(x_i))\]</div>
<p>wobei <span class="arithmatex">\(P(x_i)\)</span> die Wahrscheinlichkeit des Ereignisses <span class="arithmatex">\(x_i\)</span> ist und <span class="arithmatex">\(\log_2\)</span> der Logarithmus zur Basis 2 ist.</p>
<!--dsinfo1-->

<!--dsaufgabe2-->

<h2 id="aufgabe-2">Aufgabe 2</h2>
<p>Gegeben ist folgender Datensatz:</p>
<table>
<thead>
<tr>
<th>Kategorie</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
</tr>
<tr>
<td>A</td>
</tr>
<tr>
<td>B</td>
</tr>
<tr>
<td>A</td>
</tr>
<tr>
<td>A</td>
</tr>
<tr>
<td>B</td>
</tr>
</tbody>
</table>
<hr />
<p>Bestimmen Sie die Entropie des Datensatzes!</p>
<div style="page-break-after: always;"></div>
<!--dsaufgabe2-->
<!--dsloesung2-->

<h3 id="losung">Lösung</h3>
<div class="arithmatex">\[P_A = \frac{4}{6}=0.6667\]</div>
<div class="arithmatex">\[P_B = \frac{2}{6}=0.3333\]</div>
<div class="arithmatex">\[H = - (P_A \log_2(P_A)+P_B \log_2(P_B))\]</div>
<div class="arithmatex">\[H = - (0.6667+log_2(0.6667)+0.3333*log_2(0.3333))=0.918262\]</div>
<!--dsloesung2-->
<p>\newpage</p>
<h2 id="aufgabe-3">Aufgabe 3</h2>
<!--dsaufgabe3-->

<p>Wir können unseren Datensätze nun in zwei Teildatensätze einteilen <em>m1</em> und <em>m2</em>.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># CSV-Datei laden</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;ErnteBauern.csv&#39;</span><span class="p">)</span>

<span class="n">m1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Feuchte&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="p">]</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Feuchte&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">13</span><span class="p">]</span>
</code></pre></div>
<p>Entwickeln Sie eine Pythonfunktion <strong>calcEntropie(mx):Entropie</strong> welche die Entropie eines übergebenen Arrays mit den Kategorien <strong>Ernten</strong> und <strong>Warten</strong> ermittelt.</p>
<!--dsaufgabe3-->
<!--dsinfo3-->

<p>Wenn wir mir unsere entwickelten Funktion <strong>calcEntropie(mx):Entropie</strong> die Datenmenge nun schrittweise teilen, erhalten wir die folgende Darstellung.</p>
<p><img alt="Entropie der Feuchte" src="../images/ds3.png" /></p>
<p>Wie wir sehen erhalten wir bei einen Wert von <span class="arithmatex">\(Feuchte = 16\)</span> eine Entropie in der Menge e2 von 0. Nun müssen wir noch überprüfen ob es möglich ist eine Menge im Effekt der <strong>Regenwahrscheinlichkeit</strong> zu finden, der gegen 0 geht.</p>
<p><img alt="Entropie der Regenwahrscheinlichkeit" src="../images/ds4.png" /></p>
<p>Wie wir sehen, ist der geringste Entropiewert der Wert von 0, wenn wir bei einer <span class="arithmatex">\(Feuchte &gt;= 16\)</span> die Mengen trennen. Durch diese Entscheidung erhalten wir den größten <strong>Informationsgewinn</strong> erreicht, dieser wird auch als <em>gain</em> bezeichnet. </p>
<p>Wir haben also unsere erste Entscheidung für den Entscheidungsbaum getroffen.</p>
<p><img alt="Erste Entscheidung" src="../images/ds5.png" />{ width=400px }</p>
<!--dsinfo3-->
<p>\newpage</p>
<h2 id="aufgabe-4">Aufgabe 4</h2>
<!--dsaufgabe4-->

<p>Entsprechend den zuvor durchgeführten Überlegungen können wir die verbleibende Menge weiter einteilen:</p>
<p><img alt="Weitere Einteilung" src="../images/ds6.png" /></p>
<p>Führen Sie die weiteren Überlegungen mit der verbleibenden Menge (<span class="arithmatex">\(Feuchte &lt; 16\)</span>) durch und finden Sie die nächsten zwei Knoten unseres Entscheidungsbaumes, indem Sie die Funktion <strong>calcEntropie(m):Entropie</strong> verwenden. Ergänzen Sie mit den Ergebnissen den unten abgebildeten Entscheidungsbaum!</p>
<p><img alt="Vollständiger Entscheidungsbaum" src="../images/ds7.png" />{ width=500px }</p>
<blockquote>
<p>Diskutieren Sie wie Sie weiter vorgehen sollten !</p>
</blockquote>
<p>\newpage</p>
<!--dsaufgabe4-->
<!--dsinfo4-->

<p>Es bietet sich nicht an den letzten Datenpunkt von <em>Warten</em> bei <em>Feuchte=13</em> / <em>Regenwahrscheinlichkeit=45</em> mit in den Entscheidungsbaum aufzunehmen. Bei dem Datenpunkt scheint es sich im einen Ausreißer zu handeln. Würde der Datenpunkt mit in den Entscheidungsbaum aufgenommen, so würde dieses den Entscheidungsbaum unnötig verkomplizieren. Man spricht in diesem Fall auch von der <em>Überanpassung</em> eines Modells.</p>
<blockquote>
<p>Die Überanpassung (auch bekannt als Overfitting) bezeichnet ein Phänomen, bei dem ein Modell so eng auf die Trainingsdaten passt, dass es nur in der Lage ist, diese spezifischen Daten gut vorherzusagen und nicht in der Lage ist, neue Daten oder eine Testmenge gut zu verallgemeinern.</p>
<p>Dies kann insbesondere bei komplexeren Entscheidungsbaum-Modellen auftreten, bei denen das Modell so viele Schichten hat, dass es fast jede mögliche Kombination von Variablen innerhalb der Trainingsdaten abdeckt. Dies führt dazu, dass das Modell ein "Gedächtnis" für die Trainingsdaten entwickelt und sich an jede einzelne Beobachtung erinnert, anstatt allgemeine Muster zu lernen, die für neue Datensätze gelten können.</p>
<p>Ein overfitted Entscheidungsbaum kann sich negativ auf die Leistung des Modells auswirken, indem es zu schlechten Vorhersagen für neue Daten führt. Um die Überanpassung von Entscheidungsbäumen zu reduzieren, können verschiedene Methoden angewandt werden, wie z.B. Regelungsverfahren wie Pruning, Setzen von Maximaltiefe für den Baum, sowie Verwendung von Klassifikationsmodellen mit weniger Features.</p>
</blockquote>
<!--dsinfo4-->

<h2 id="aufgabe-5">Aufgabe 5</h2>
<!--dsaufgabe5-->

<p>Mittels des Pythonpaketes <em>sklearn</em> lassen sich Entscheidungsbäume erstellen. Der folgende Codeauszug nutzt dieses Paket zum erstellen eines Entscheidungsbaumes:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">tree</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Ergebnis&#39;</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Ergebnis&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">criterion</span> <span class="o">=</span> <span class="s1">&#39;entropy&#39;</span><span class="p">)</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre></div>
<p>Untersuchen Sie mit Hilfe der Methode <strong>predict</strong> den entwickelten Entscheidungsbaum! Erzeugen Sie dafür 4 typische Werte für den Datensatz!</p>
<!--dsaufgabe5-->
<p>\newpage</p>
<h2 id="aufgabe-6">Aufgabe 6</h2>
<!--dsaufgabe6-->

<p>Python ermöglicht es Ihnen auch den Entscheidungsbaum zu visualisieren. Dazu dient das Paket <strong>graphviz</strong>, welches natürlich zuvor installiert werden muss. Der folgende Code visualisiert den entstandenen Entscheidungsbaum im JupyterNotebook.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">export_graphviz</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">import</span> <span class="nn">graphviz</span>

<span class="c1"># exportiere Baum in DOT-Format</span>
<span class="n">dot_data</span> <span class="o">=</span> <span class="n">export_graphviz</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                     <span class="n">feature_names</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                     <span class="n">class_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Ernten&#39;</span><span class="p">,</span> <span class="s1">&#39;Warten&#39;</span><span class="p">],</span> 
                     <span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rounded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">special_characters</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># konvertiere DOT-Format zu einem Graph-Objekt</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">dot_data</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</code></pre></div>
<!--dsaufgabe6-->
<!--dsloesung6-->

<p><img alt="Entscheidungsbaum mit sklearn" src="../images/ds8.png" /></p>
<p>Welche Aussage lassen sich aus der Grafik ableiten?</p>
<!--dsloesung6-->
<p>\newpage</p>
<h2 id="aufgabe-7">Aufgabe 7</h2>
<!--dsaufgabe7-->

<p>Zur Validierung unseres Modells stellt uns der Kunde einen weiteren Datensatz zur Verfügung (<a href="../Data/ErnteBauern2.csv">ErnteBauern2</a>). Überprüfen Sie mit Hilfe dieses Datensatzes die Qualität des Entscheidungsbaumes:</p>
<blockquote>
<p><strong>Hinweis</strong>: Nutzen Sie hierzu das Modul <em>accuracy_score</em> aus dem Paket <em>sklearn.metrics</em>!</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>

<span class="c1"># Laden Sie den Testdatensatz</span>
<span class="n">test_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Data/ErnteBauern2.csv&#39;</span><span class="p">)</span>

<span class="c1"># Trennen Sie die Zielvariable vom Rest der Daten</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">test_data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Ergebnis&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">test_data</span><span class="p">[</span><span class="s1">&#39;Ergebnis&#39;</span><span class="p">]</span>


<span class="c1"># Führen Sie Vorhersagen auf dem Testdatensatz durch </span>
<span class="c1"># (wobei clf unser trainierter Entscheidungsbaum aus Aufgabe 5 ist)</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># Berechnen Sie die Vorhersagegenauigkeit auf dem Testdatensatz</span>
<span class="n">accuracy</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Vorhersagegenauigkeit auf dem Testdatensatz: </span><span class="si">{:.2f}</span><span class="s2">%&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
</code></pre></div>
<!--dsaufgabe7-->
<p>\newpage</p>
<!--dsaufgabe8-->

<h2 id="aufgabe-8">Aufgabe 8</h2>
<p>Wählen Sie einen geeigneten Datensatz aus und entwerfen Sie eine Entscheidungsbaum Modell und präsentieren Sie im Anschluss daran der Klasse ihren Datensatz, ihr Vorgehen und das entstandene Modell. Folgende Datensätze können Sie z.B. verwenden!</p>
<ol>
<li>
<p><strong>Titanic-Datensatz</strong>: Der Titanic-Datensatz enthält Informationen über Passagiere an Bord des Schiffes Titanic, einschließlich Merkmalen wie Alter, Geschlecht, Klasse und Überlebensstatus. Dieser Datensatz ist gut geeignet für binäre Klassifizierungsaufgaben und kann auch zur Vorhersage des Überlebens von Passagieren auf anderen Schiffsreisen verwendet werden. <a href="https://www.kaggle.com/c/titanic/data">https://www.kaggle.com/c/titanic/data</a></p>
</li>
<li>
<p><strong>Bank Marketing-Datensatz</strong>: Dieser Datensatz enthält Informationen zu Kunden einer portugiesischen Bank und ob sie Ja oder Nein für ein Termingeld-Abonnement abgeschlossen haben. Es enthält eine Vielzahl von Kundenmerkmalen wie Alter, Beruf, Familienstand usw., die verwendet werden können, um vorherzusagen, ob ein Kunde ein Abonnement abschließen wird oder nicht. <a href="https://archive.ics.uci.edu/ml/datasets/Bank+Marketing">https://archive.ics.uci.edu/ml/datasets/Bank+Marketing</a></p>
</li>
<li>
<p><strong>Breast Cancer Wisconsin (diagnostic) Dataset</strong>: Dieser Datensatz enthält Details zu den Zellkernmerkmalen von malignen und benignen Brustgewebeproben sowie einer Diagnose, ob eine Probe maligne oder benign ist. Der Datensatz ist gut geeignet für binäre Klassifizierungsaufgaben zum Erkennen von Brustkrebs. <a href="https://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+(Diagnostic)">https://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+(Diagnostic)</a></p>
</li>
</ol>
<h3 id="die-prasentation-sollte-folgendes-beinhalten">Die Präsentation sollte folgendes beinhalten:</h3>
<ul>
<li>Vorstellen (Exploration) des Datensatzes mit geeigneter Visualisierung der Daten.</li>
<li>Darstellung des Entscheidungsbaumes</li>
<li>Validierung des Entscheidungsbaumes (Aussagen zur Genauigkeit des Entscheidungsbaumes)</li>
</ul>
<!--dsaufgabe8-->
<p>\newpage</p>
<h2 id="fragen-zum-verstandnis">Fragen zum Verständnis</h2>
<ol>
<li>
<p>Was ist der Hauptzweck von Entscheidungsbäumen?</p>
<ul>
<li>[ ] Datenspeicherung</li>
<li>[ ] Berechnung von Durchschnittswerten</li>
<li>[ ] Klassifizierung und Vorhersage</li>
<li>[ ] Datenvisualisierung</li>
</ul>
</li>
<li>
<p>Welches Maß wird verwendet, um die "Unordnung" oder "Unsicherheit" in einer Datenmenge zu beschreiben?</p>
<ul>
<li>[ ] Kovarianz</li>
<li>[ ] Entropie</li>
<li>[ ] Varianz</li>
<li>[ ] Korrelation</li>
</ul>
</li>
<li>
<p>Wie wird die Entropie einer Datenmenge berechnet?</p>
<ul>
<li>[ ] <span class="arithmatex">\(P(x_i) = \frac{n_i}{N}\)</span></li>
<li>[ ] <span class="arithmatex">\(H(X) = \sum_{i=1}^n P(x_i) \log_2(P(x_i))\)</span></li>
<li>[ ] <span class="arithmatex">\(H(X) = -\sum_{i=1}^n P(x_i) \log_2(P(x_i))\)</span></li>
<li>[ ] <span class="arithmatex">\(H(X) = \frac{1}{n}\sum_{i=1}^n (x_i - \bar{x})^2\)</span></li>
</ul>
</li>
<li>
<p>Welches Python-Paket wird verwendet, um Entscheidungsbäume zu erstellen?</p>
<ul>
<li>[ ] numpy</li>
<li>[ ] matplotlib</li>
<li>[ ] pandas</li>
<li>[ ] sklearn</li>
</ul>
</li>
<li>
<p>Wie kann man die Vorhersagegenauigkeit eines Entscheidungsbaums auf einem Testdatensatz berechnen?</p>
<ul>
<li>[ ] Indem man die Entropie der Vorhersagen berechnet</li>
<li>[ ] Mit der Methode <code>accuracy_score</code> aus dem Paket <code>sklearn.metrics</code></li>
<li>[ ] Durch Vergleich der mittleren quadratischen Fehler</li>
<li>[ ] Durch Berechnung der Korrelation zwischen den tatsächlichen und den vorhergesagten Werten</li>
</ul>
</li>
<li>
<p>Welches der folgenden Aussagen beschreibt die Überanpassung (Overfitting) von Entscheidungsbäumen am besten?</p>
<ul>
<li>[ ] Ein überangepasster Entscheidungsbaum hat eine zu geringe Anzahl an Blättern.</li>
<li>[ ] Die Genauigkeit eines überangepassten Entscheidungsbaums sinkt, wenn neue Daten hinzugefügt werden.</li>
<li>[ ] Ein überangepasster Entscheidungsbaum passt sich zu stark an die Trainingsdaten an und kann dadurch schlechtere Vorhersagen auf neuen Daten liefern.</li>
<li>[ ] Ein überangepasster Entscheidungsbaum hat eine hohe Generalisierungsfähigkeit und ist daher besser auf neuen Daten anwendbar.</li>
</ul>
</li>
</ol>
<!--

LSG:

1. Nr. 3
2. Nr. 2
3. Nr. 3
4. Nr. 4
5. Nr. 2
6. Nr. 3

 -->

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.0238f547.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>